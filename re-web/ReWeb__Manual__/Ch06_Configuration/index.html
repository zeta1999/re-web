<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Ch06_Configuration (re-web.ReWeb__Manual__.Ch06_Configuration)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">re-web</a> &#x00BB; <a href="../index.html">ReWeb__Manual__</a> &#x00BB; Ch06_Configuration</nav><h1>Module <code>ReWeb__Manual__.Ch06_Configuration</code></h1><nav class="toc"><ul><li><a href="#setting-environment-variables">Setting environment variables</a></li><li><a href="#overriding-the-configuration-module">Overriding the configuration module</a></li></ul></nav></header><aside><p>ReWeb applications are configured using the <a href="../../ReWeb/Config/index.html"><code>ReWeb.Config</code></a> module. This module defines:</p><ul><li>Functions for reading environment variables in a type-safe way</li><li>A module type that defines ReWeb's known config settings</li><li>A module that defines the default values of these settings</li></ul><p>This last module, <a href="../../ReWeb/Config/Default/index.html"><code>ReWeb.Config.Default</code></a>, is injected into the major parts of ReWeb and is accessible from them. You can configure a ReWeb application in two ways:</p></aside><section><header><h2 id="setting-environment-variables"><a href="#setting-environment-variables" class="anchor"></a>Setting environment variables</h2><p>You can run a ReWeb application after setting environment variables it knows about. See <a href="../../ReWeb/Config/module-type-S/index.html"><code>ReWeb.Config.S</code></a> for the exact ones. For example:</p><pre><code class="ml">$ REWEB__buf_size=2048 esy x dune exec bin/App.exe</code></pre><p>This configures the internal buffer size used for building strings from request bodies.</p></header></section><section><header><h2 id="overriding-the-configuration-module"><a href="#overriding-the-configuration-module" class="anchor"></a>Overriding the configuration module</h2><p>This is a more complex method of overriding configuration that's really only meant for testing, because it doesn't work for actually running a server. For testing purposes, you can create your own config module that <i>conforms</i> to ReWeb's configuration module type:</p><pre><code class="ml">module MyConfig = {
  let buf_size = 2_048;
};</code></pre><p>Then, you can inject it into the main ReWeb modules that handle requests, services, and filters. See <code>ReWebTest.Request</code> for a concrete example of this.</p></header></section></div></body></html>